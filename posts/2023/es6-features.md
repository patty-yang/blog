---
title: es6+ ç‰¹æ€§
date: 2020-09-15
tags:
  - js
---

> ğŸ’¡ ES6ï¼ˆECMAScript 2015ï¼‰ è§£å†³äº† js æ— æ³•å¼€å‘å¤§å‹åº”ç”¨çš„è¯­è¨€å±‚é¢çš„é—®é¢˜ï¼Œä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ä¸å†ä½¿ç”¨æ•°å­—ä½œä¸ºç¼–å·ï¼Œè€Œä½¿ç”¨å¹´ä»½ã€‚

## ğŸ“Œ let å’Œ const å£°æ˜

> ğŸ’¡ æœ€ä½³å®è·µï¼šä¼˜å…ˆä½¿ç”¨ const å®šä¹‰å˜é‡ï¼Œåªåœ¨éœ€è¦ä¿®æ”¹å€¼æ—¶ä½¿ç”¨ letï¼Œä»¥ç¡®ä¿ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚

### â­ï¸ æ ¸å¿ƒç‰¹ç‚¹

| ç‰¹æ€§       | è¯´æ˜                         |
|----------|----------------------------|
| ğŸŒ å…¨å±€ä½œç”¨åŸŸ | å…¨å±€å®šä¹‰çš„å¸¸é‡ä¸å†ä½œä¸ºå±æ€§æ·»åŠ åˆ°å…¨å±€å¯¹è±¡       |
| âš ï¸ æš‚æ—¶æ€§æ­»åŒº | åœ¨å˜é‡å£°æ˜å‰ä½¿ç”¨ä¼šè§¦å‘ ReferenceError |
| ğŸš« é‡å¤å£°æ˜  | åŒä¸€ä½œç”¨åŸŸå†…ä¸å¯é‡å¤å£°æ˜åŒåå˜é‡           |
| âœ¨ åˆå§‹åŒ–è¦æ±‚  | const å£°æ˜çš„å¸¸é‡å¿…é¡»åŒæ—¶è¿›è¡Œåˆå§‹åŒ–       |
| ğŸ“¦ å—çº§ä½œç”¨åŸŸ | å˜é‡ä»…åœ¨å£°æ˜çš„ä»£ç å—å†…æœ‰æ•ˆ              |

### ğŸ“ ä½¿ç”¨ç¤ºä¾‹

```javascript
// æ¨èå†™æ³•
const MAX_COUNT = 100
const config = {
  theme: 'dark',
  language: 'zh'
}

// éœ€è¦ä¿®æ”¹æ—¶ä½¿ç”¨ let
let currentCount = 0
```

## ğŸ¨ æ¨¡æ¿å­—ç¬¦ä¸²é«˜çº§ç”¨æ³•

> ğŸ’¡ æ¨¡æ¿å­—ç¬¦ä¸²ä¸ä»…æ”¯æŒåŸºæœ¬çš„å˜é‡æ’å€¼ï¼Œè¿˜æ”¯æŒæ›´å¼ºå¤§çš„æ ‡ç­¾æ¨¡æ¿ï¼ˆTagged Templatesï¼‰åŠŸèƒ½ã€‚

### ğŸ“ æ ‡ç­¾æ¨¡æ¿ç¤ºä¾‹

```js
const name = 'es6'
const test = 'test'
const text = myTag`Hello,${test}-${name}`
// æœ‰ä¸¤ä¸ªæ’å€¼ï¼Œå°±ä¼šæŠŠå­—ç¬¦ä¸²æ‹†æˆä¸‰éƒ¨åˆ†
// ä¹Ÿå°±æ˜¯è¯´ï¼Œparts çš„é•¿åº¦æ˜¯ args çš„é•¿åº¦ + 1
// text = myTag(['Hello, ', '!'], name) // Hello, es6!
// text = myTag(['Hello,', '-', ''], test, name) // Hello,test-es6!
function myTag(parts, ...args) {
  let str = ''
  // éå† parts å’Œ argsï¼Œæ‹¼æ¥å­—ç¬¦ä¸²
  for (let i = 0; i < parts.length; i++) {
    str += parts[i] // æ·»åŠ å½“å‰çš„å­—ç¬¦ä¸²éƒ¨åˆ†
    if (i < args.length) {
      str += args[i] // æ·»åŠ å¯¹åº”çš„å‚æ•°
    }
  }
  return str
}
```

## ğŸ“Š å¹‚è¿ç®—ç¬¦

> ğŸ’¡ ES6+ å¼•å…¥äº†å¹‚è¿ç®—ç¬¦ `**`ï¼Œæä¾›äº†ä¸€ç§æ›´ç®€æ´çš„è®¡ç®—æ–¹å¼ã€‚

### åŸºæœ¬ç”¨æ³•

```js
2 ** 3 // 8
2 ** 4 // 16
2 ^ 3 // 1
```

## ğŸ” å­—ç¬¦ä¸²æ–°å¢ API

### ğŸ›  å®ç”¨æ–¹æ³•

| æ–¹æ³•å          | æè¿°            | ç¤ºä¾‹                                 |
|--------------|---------------|------------------------------------|
| âœ¨ includes   | åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šå†…å®¹ | `'Hello'.includes('el') // true`   |
| ğŸ§¹ trim      | å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºç™½å­—ç¬¦  | `'  abc  '.trim() // 'abc'`        |
| â¬…ï¸ trimStart | å»é™¤å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦  | `'  abc  '.trimStart() // 'abc  '` |
| â¡ï¸ trimEnd   | å»é™¤å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦  | `'  abc  '.trimEnd() // '  abc'`   |

## ğŸ¨ æ¨¡æ¿å­—ç¬¦ä¸²

> ğŸ’¡ æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆTemplate Literalsï¼‰æ˜¯ ES6 å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œä½¿ç”¨åå¼•å·ï¼ˆ`ï¼‰åŒ…è£¹ï¼Œæ”¯æŒå¤šè¡Œæ–‡æœ¬å’Œå˜é‡æ’å€¼ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- æ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²
- æ”¯æŒå˜é‡æ’å€¼ `${expression}`
- æ”¯æŒæ ‡ç­¾æ¨¡æ¿ï¼ˆTagged Templatesï¼‰
- å¯ä»¥åŒ…å«è¡¨è¾¾å¼å’Œå‡½æ•°è°ƒç”¨

### ğŸ“ åŸºç¡€ç¤ºä¾‹

```javascript
// 1. åŸºæœ¬ä½¿ç”¨
const name = 'ES6'
const greeting = `Hello, ${name}!` // å˜é‡æ’å€¼

// 2. å¤šè¡Œå­—ç¬¦ä¸²
const multiLine = `
  ç¬¬ä¸€è¡Œ
  ç¬¬äºŒè¡Œ
  ç¬¬ä¸‰è¡Œ
`

// è‡ªå®šä¹‰ CSS-in-JS é£æ ¼çš„æ ‡ç­¾æ¨¡æ¿å‡½æ•°
const styled = (strings, ...values) => {
  let result = ''

  // äº¤æ›¿åˆå¹¶å­—ç¬¦ä¸²ç‰‡æ®µå’Œæ’å€¼
  strings.forEach((string, i) => {
    result += string
    if (i < values.length) {
      result += values[i]
    }
  })

  return result
}

// ä½¿ç”¨ç¤ºä¾‹
const color = 'red'
const styles = styled`
  background: ${color};    
  color: "red";
`

console.log(styles)
//   background: red;
//   color: "red";
```

## ğŸ”„ æ•°ç»„æ–¹æ³•ä¸éå†

### ğŸ” æ•°ç»„æ£€æµ‹

| æ–¹æ³•              | æè¿°      | ç¤ºä¾‹                          |
|-----------------|---------|-----------------------------|
| âœ¨ Array.isArray | åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„ | `Array.isArray([]) // true` |

### ğŸ›  æ•°ç»„è½¬æ¢ä¸å¤„ç†

| æ–¹æ³• ğŸ“      | æè¿°              | è¿”å›å€¼           |
|------------|-----------------|---------------|
| â° for...of | éå†æ•°ç»„å’Œç±»æ•°ç»„å¯¹è±¡çš„å€¼    | æ— è¿”å›å€¼          |
| ğŸ”„ forEach | æ‰§è¡Œå›æ‰å‡½æ•°          | æ— è¿”å›å€¼          |
| ğŸ—º map     | æ˜ å°„æ•°ç»„å…ƒç´           | æ–°æ•°ç»„           |
| ğŸ” filter  | è¿‡æ»¤æ•°ç»„å…ƒç´           | ç¬¦åˆæ¡ä»¶çš„æ–°æ•°ç»„      |
| ğŸ¯ find    | æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´     | å…ƒç´ æˆ– undefined |
| âœ… some     | æ£€æŸ¥æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æ¡ä»¶ | å¸ƒå°”å€¼           |
| â˜‘ï¸ every   | æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æ¡ä»¶   | å¸ƒå°”å€¼           |
| ğŸ”„ reduce  | å°†æ•°ç»„å½’çº¦ä¸ºå•ä¸ªå€¼       | ç´¯ç§¯ç»“æœ          |

## ğŸ¯ å¯¹è±¡æ‰©å±•ç‰¹æ€§

### ğŸ“¦ åŸºç¡€ç‰¹æ€§

| ç‰¹æ€§       | æè¿°      | ç¤ºä¾‹                        |
|----------|---------|---------------------------|
| ğŸ”„ æ‰©å±•è¿ç®—ç¬¦ | å±•å¼€å¯¹è±¡å±æ€§  | `const newObj = {...obj}` |
| ğŸ“ è§£æ„èµ‹å€¼  | ä»å¯¹è±¡ä¸­æå–å€¼ | `const {name, age} = obj` |
| ğŸ”’ å±æ€§æè¿°ç¬¦ | å®šä¹‰å±æ€§ç‰¹æ€§  | è§ä¸‹æ–¹ç¤ºä¾‹                     |

### âš™ï¸ å±æ€§æè¿°ç¬¦ç¤ºä¾‹

```js
const obj = {
  name: 'es6',
  age: 20
}

Object.defineProperty(obj, 'name', {
  value: 'es6',
  writable: false, // æ˜¯å¦å¯ä»¥è¢«é‡æ–°å®šä¹‰
  enumerable: true, // æ˜¯å¦å¯ä»¥è¢«éå†ï¼Œä¼šå½±å“åˆ° for in
  configurable: true // æ˜¯å¦å¯ä»¥è¢«æ›´æ”¹
})
```

## ğŸ¯ å‡½æ•°ç‰¹æ€§ä¸æ‰©å±•

### âš¡ï¸ ç®­å¤´å‡½æ•°

> ğŸ’¡ ç®­å¤´å‡½æ•°æ˜¯ ES6 å¼•å…¥çš„ä¸€ç§æ›´ç®€æ´çš„å‡½æ•°å†™æ³•ï¼Œå…·æœ‰ç‹¬ç‰¹çš„ç‰¹æ€§ã€‚

#### æ ¸å¿ƒç‰¹ç‚¹

| ç‰¹æ€§          | è¯´æ˜                        |
|-------------|---------------------------|
| ğŸš« æ„é€ å™¨      | ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ï¼ˆä¸èƒ½è¢« newï¼‰       |
| ğŸ“Œ this ç»‘å®š  | æ²¡æœ‰è‡ªå·±çš„ thisï¼Œç»§æ‰¿å®šä¹‰æ—¶ä¸Šä¸‹æ–‡çš„ this |
| âŒ arguments | ä¸ç»‘å®š arguments å¯¹è±¡          |
| ğŸ”’ åŸå‹       | æ²¡æœ‰ prototype å±æ€§           |

### ğŸ¨ å‡½æ•°æ–°ç‰¹æ€§

| ç‰¹æ€§      | æè¿°               | ç¤ºä¾‹                              |
|---------|------------------|---------------------------------|
| ğŸ“¦ å‰©ä½™å‚æ•° | æ”¶é›†å‰©ä½™å‚æ•°ä¸ºæ•°ç»„        | `function sum(...args) {}`      |
| ğŸ— ç±»è¯­æ³•  | ä½¿ç”¨ static å®šä¹‰é™æ€æˆå‘˜ | `static method() {}`            |
| ğŸ”„ ç»§æ‰¿æœºåˆ¶ | é€šè¿‡ extends å®ç°ç±»ç»§æ‰¿ | `class Child extends Parent {}` |

### ğŸ›  å‡½æ•°æ–¹æ³•

| æ–¹æ³•       | ä½œç”¨             | ç‰¹ç‚¹       |
|----------|----------------|----------|
| ğŸ“ call  | æŒ‡å®š this è°ƒç”¨å‡½æ•°   | å‚æ•°åˆ—è¡¨å±•å¼€ä¼ å…¥ |
| ğŸ¯ apply | æŒ‡å®š this è°ƒç”¨å‡½æ•°   | å‚æ•°ä»¥æ•°ç»„ä¼ å…¥  |
| ğŸ”’ bind  | åˆ›å»ºç»‘å®š this çš„æ–°å‡½æ•° | è¿”å›æ–°å‡½æ•°å®ä¾‹  |
