## 为什么使用微前端

这个项目是公司几年前的项目 B 端项目，到现在一直在维护，不过维护的成本越来越高，很多地方，不止用户不满意，开发者也很是头疼。
随着代码越来越臃肿，所以对整个项目的架构进行升级，不过要求是 遗产代码能够平滑的迁移，不能影响用户的使用，而且需要尽可能的保证一直处于热门的技术栈

而且这个项目，作为 B 端来说，业务边界比较明确，虽然项目体量庞大，但是业务之间的耦合度不是很高，而且项目持续的比较久了，有些业务的技术栈比较老旧了，
扩展起来比较困难，第三方库都不敢随意的更新和升级，公司也要求得改了

最开始的时候其实是考虑的 iframe，但是考虑到了业务的需要及升级的问题还是排除了这个方案

而且在使用过程中确实遇到了不少问题，不过对 qiankun 原理掌握的比较清楚以后，这些问题总归也可以解决

当然最难的不是这些技术问题，而是在最开始的时候，我们项目该如何拆分，刚开始的时候没想太多，走了很多弯路，最后化繁为简，反而轻松不少

到最后经过拆分，在开发测，基本做到了子项目的独立开发，独立部署。当然在通过主项目联调内容的时候还存在一些问题，不过在子项目业务及范围捋清楚后，也就非常顺畅了。

在后期做增量开发的时候也非常流畅,能够用到新的技术栈.

基本上就是这样的情况，您还有哪些细节想了解的 我再详细描述一下

## 子应用拆分

首先考虑的是按业务进行拆分，其中有很多细节需要考虑。总的来说就是

1. 保持核心业务的独立性，把无关的子业务拆分解耦
2. 业务关联紧密的功能应该做成一个子应用，业务关联紧密就是看 这个字应用于其他子应用是否有频繁的通信需求
3. 看页面结构，这个我们当时有过一些争论，如果结构不清晰、业务有交叉这种情况下，是否要考虑未来场景
   > 最终我们还是考虑到不盲目的进行细致拆分，先粗力度划分，随着需求发展，一步一步拆分
4. 秉持着高内聚低耦合的原则: 复杂度拆分，复用度提高

## 微前端库的优缺点

qiankun、micro-app、wujie 在子应用加载，渲染、css/js 隔离应用通信上都有却别，但也有相同之处

在加载和渲染上 qiankun 是使用的 HTML Entry 而 micro-app 也是 HTML Entry 只不过又加入了 Web Components，不过是不去劫持路由了

HTML Entry 其实就是借助了 webpack 在打包时候的特定，读取到 html 文件的内容，然后提取 html 中引入的 css/js。

然后经过分析和处理，再将内容放到主应用

应用通信上，qiankun 采用的是 props 属性传递的方式，micro-app 借助了 WebComponent 和浏览器的 CustomEvent

micro-app 接入感觉简单一些

qiankun 时间长，社区活跃，解决方案多
