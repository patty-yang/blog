## ä»€ä¹ˆæ˜¯ Monorepo ğŸš€

- **ä¸€å¥è¯**: æŠŠä¸€å †ç›¸å…³é¡¹ç›®æ”¾åˆ°åŒä¸€ä¸ªä»“åº“é‡Œï¼Œä¸€èµ·ç®¡ç†ã€ä¸€èµ·å¼€å‘ã€ä¸€èµ·å‘ç‰ˆã€‚
- **ç±»æ¯”**: ä¸å†ç»™æ¯ä¸ªé¡¹ç›®å¼€ä¸€ä¸ªâ€œæ–‡ä»¶å¤¹ï¼ˆä»“åº“ï¼‰â€ï¼Œè€Œæ˜¯æŠŠå®ƒä»¬æ”¾è¿›ä¸€ä¸ªâ€œå¤§æ–‡ä»¶å¤¹â€ï¼Œé‡Œé¢æ¯ä¸ªé¡¹ç›®è¿˜æ˜¯ç‹¬ç«‹çš„ï¼Œä½†å¤§å®¶å…±ç”¨ä¸€å¥—å·¥å…·å’Œè§„åˆ™ã€‚

## ä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿâœ¨

- **çœå¿ƒ ğŸ§¹**: ç»Ÿä¸€ä¾èµ–ã€ç»Ÿä¸€å·¥å…·ï¼ˆESLintã€Prettierã€CIï¼‰ï¼Œä¸å†æ¯ä¸ªä»“åº“é‡å¤é…ç½®ã€‚
- **çœæ—¶ â±ï¸**: è·¨é¡¹ç›®æ”¹åŠ¨ä¸€æ¬¡æäº¤å°±æå®šï¼Œä¸ç”¨åˆ†å¤šä¸ªä»“åº“æ¥å›è·‘ã€‚
- **çœç©ºé—´ ğŸ’¾**: ä¾èµ–èƒ½è¢«æå‡åˆ°æ ¹ç›®å½•ï¼Œç£ç›˜ä¸å†è¢«é‡å¤å®‰è£…â€œåƒç©ºâ€ã€‚
- **çœæ²Ÿé€š ğŸ’¬**: ä»£ç åœ¨ä¸€èµ·ï¼Œè”è°ƒã€å¯¹é½ç‰ˆæœ¬ã€æ’æŸ¥é—®é¢˜éƒ½æ›´å¿«ã€‚

### ä»€ä¹ˆæ—¶å€™ç”¨æœ€åˆé€‚ï¼ŸğŸ¯

- **å¤šä¸ªåŒ…/æ¨¡å—ç›¸äº’ä¾èµ–**ï¼ˆå¦‚ `shared` -> `reactivity` -> `vue`ï¼‰
- **éœ€è¦ç»Ÿä¸€æ ‡å‡†**ï¼ˆç»Ÿä¸€ tsconfig/eslint/prettier/commit lintï¼‰
- **éœ€è¦è”åŠ¨å‘ç‰ˆ**ï¼ˆæ¯”å¦‚ A æ”¹äº†ï¼ŒB ä¹Ÿè¦è·Ÿç€å‘ï¼‰

### å’Œ Multi-repo çš„å·®åˆ«ï¼ŸğŸ”

- **Monorepo**: ä¸€ä¸ªä»“åº“è£…å¾ˆå¤šåŒ…ï¼Œç®¡ç†æ›´é›†ä¸­ï¼Œè·¨åŒ…æ”¹åŠ¨è¶…é¡ºæ»‘ã€‚
- **Multi-repo**: æ¯ä¸ªåŒ…ä¸€ä¸ªä»“åº“ï¼Œéš”ç¦»æ›´å¼ºï¼Œä½†è·¨é¡¹ç›®åä½œæˆæœ¬é«˜ã€‚

---

## å…¸å‹ç›®å½•ç»“æ„ï¼ˆä¸ä½ å½“å‰é¡¹ç›®å¯¹é½ï¼‰ğŸ—‚ï¸

```
minivue/
  packages/
    shared/
    reactivity/
    vue/
  pnpm-workspace.yaml
  package.json
```

---

## æ˜“è¸©çš„å‘ä¸è§„é¿ âš ï¸

- **å‘1ï¼šå­åŒ…æ²¡è®¾ name æˆ–ç‰ˆæœ¬ ğŸ§±**
    - ç°è±¡ï¼šworkspace é“¾æ¥ä¸äº†ï¼Œæˆ–è€… filter é€‰ä¸ä¸­
    - è§£å†³ï¼šæ¯ä¸ªå­åŒ… `package.json` å¿…é¡»æœ‰ `name`ï¼Œç‰ˆæœ¬å¯ä»ç®€ï¼ˆå¦‚ `0.0.0`ï¼‰

- **å‘2ï¼šä¾èµ–å¾ªç¯ â™»ï¸**ï¼ˆA ä¾èµ– Bï¼ŒB åˆä¾èµ– Aï¼‰
    - ç°è±¡ï¼šæ„å»ºæˆ–è¿è¡Œå¼‚å¸¸ã€ç±»å‹æ¨æ–­æ··ä¹±
    - è§£å†³ï¼šæŠ½ `shared` å±‚ï¼Œæ‰“ç ´ç¯ï¼Œæˆ–ä¸‹æ²‰åˆ°æ›´åŸºç¡€çš„åŒ…

- **å‘3ï¼šè·¯å¾„å¼•ç”¨æ··ä¹± ğŸ§­**
    - ç°è±¡ï¼šTS èƒ½è¿‡ä½†è¿è¡Œæ—¶æ‰¾ä¸åˆ°ï¼›æˆ–åä¹‹
    - è§£å†³ï¼šç»Ÿä¸€ç”¨åŒ…åå¯¼å…¥ï¼ˆ`@vue/shared`ï¼‰ï¼Œå°‘ç”¨ç›¸å¯¹è·¯å¾„è·¨åŒ…

- **å‘4ï¼šç‰ˆæœ¬ç®¡ç†å¤±æ§ ğŸ“¦**
    - ç°è±¡ï¼šæŸäº›åŒ…å¿˜äº†å‡çº§ï¼Œå¯¼è‡´è¡Œä¸ºä¸ä¸€è‡´
    - è§£å†³ï¼šå€ŸåŠ© changeset/è‡ªç ”è„šæœ¬ï¼Œæˆ–è€…ç®€å•ç²—æš´ï¼šç»Ÿä¸€ `workspace:*`

---

## pnpm workspace ç©è½¬ Monorepo ğŸ§°

### 1) æ ¹ç›®å½•é…ç½®ï¼ˆåªåšä¸€æ¬¡ï¼‰ğŸ—ï¸

- `pnpm-workspace.yaml`

```
packages:
  - packages/*
```

- æ ¹ `package.json` å¸¸è§é…ç½®ï¼š

```
{
  "private": true,
  "packageManager": "pnpm@X.Y.Z",
  "scripts": {
    "build": "pnpm -r --filter ./packages... run build",
    "dev": "pnpm -r --parallel --filter ./packages/reactivity run dev"
  }
}
```

### 2) å­åŒ…å¦‚ä½•ç›¸äº’å¼•ç”¨ ğŸ”—

- åœ¨å­åŒ… `package.json` é‡Œï¼š

```
{
  "dependencies": {
    "@vue/shared": "workspace:*"
  }
}
```

- å«ä¹‰ ğŸ“ï¼šä¼˜å…ˆé“¾æ¥æœ¬ä»“åº“é‡Œçš„ `@vue/shared`ï¼Œä¸ä» npm ä¸‹è½½ã€‚

### 3) å¸¸ç”¨å‘½ä»¤ ğŸ› ï¸

- **å®‰è£…ä¾èµ–**ï¼ˆæ ¹ç›®å½•æ‰§è¡Œï¼‰: `pnpm install`
- **æŒ‰åŒ…æ‰§è¡Œè„šæœ¬**: `pnpm --filter @scope/pkg run dev`
- **å¯¹å…¨éƒ¨åŒ…æ‰§è¡Œ**: `pnpm -r run build`
- **åªå¯¹ä¾èµ–é“¾æ‰§è¡Œ**: `pnpm -r --filter @scope/pkg... run build`
- **è£…å…¶ä»–åŒ…** `pnpm install @vue/shared --workspace --filter reactivity`

---


